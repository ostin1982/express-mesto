{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletionPopup.js","utils/api.js","components/App.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","title","onClick","type","name","aria-label","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","avatar","about","map","Footer","ImagePopup","onClose","PopupWithForm","button","children","isOpen","onSubmit","method","noValidate","value","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","event","preventDefault","onChange","target","required","placeholder","id","minLength","maxLength","autoComplete","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","placeRef","urlRef","ConfirmDeletionPopup","onDeleteCard","api","baseUrl","headers","this","_baseUrl","_headers","url","init","fetch","then","response","ok","json","Promise","reject","status","_addCommonFetchForAllApis","body","JSON","stringify","deleteLikeCard","addLikeCard","userData","imgSrc","authorization","App","setCurrentUser","setCards","selectedCard","setSelectedCard","deletedCard","setDeletedCard","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletionPopupOpen","setIsConfirmDeletionPopupOpen","all","getInitialCards","getUserInfoAbout","result","user","catch","error","console","log","closeAllPopups","Provider","changeLikeCardStatus","newCard","newCards","c","changeInfo","addNewCard","changeUserAvatar","deleteCard","filter","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8141a91f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.8724261e.svg\";","import logo from \"../images/logo.svg\";\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img \r\n      className=\"header__logo\" \r\n      src={logo} \r\n      alt=\"Логотип проекта. Mesto Russian\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import { useContext } from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    \r\n    const isOwn = card.owner._id !== currentUser._id;\r\n    const cardDeleteButtonClassName = (\r\n        `element__basket ${isOwn ? 'element__basket_active' : 'element__basket_inactive'}`\r\n    ); \r\n\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    const cardLikeButtonClassName = (\r\n        `element__like ${isLiked ? 'element__like_active' : ''}`\r\n    ); \r\n\r\n    const handleCardClick = () => {\r\n        onCardClick(card);\r\n    } \r\n\r\n    const handleCardLike = () => {\r\n        onCardLike(card);\r\n    }\r\n\r\n    const handleDeleteClick = () => {\r\n        onCardDelete(card);\r\n    }\r\n\r\n    return (\r\n        <li className=\"element\">\r\n            <article className=\"element__card\">\r\n                <img className=\"element__img\" \r\n                src={card.link} \r\n                alt={card.title}\r\n                onClick={handleCardClick}\r\n                />\r\n            <button \r\n                type=\"button\" \r\n                className={cardDeleteButtonClassName}\r\n                onClick={handleDeleteClick}\r\n            ></button>\r\n            <div className=\"element__info\">\r\n                <h2 className=\"element__name\">{card.name}</h2>\r\n                <div className=\"element__like-conteiner\">\r\n                    <button \r\n                        type=\"button\" \r\n                        aria-label=\"Нравится\"\r\n                        className={cardLikeButtonClassName}\r\n                        onClick={handleCardLike}\r\n                    ></button>\r\n                    <span className=\"element__like-number\">{card.likes.length}</span>\r\n                </div>\r\n            </div>\r\n        </article>\r\n    </li>\r\n    );\r\n}\r\n\r\nexport default Card;","import { useContext } from \"react\";\r\n\r\nimport Card from \"./Card\";\r\n\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\n\r\nfunction Main({ cards, onEditAvatar, onEditProfile, onAddPlace, onCardClick, onCardLike, onCardDelete }) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div\r\n        className=\"profile__avatar\"  \r\n        onClick={onEditAvatar}>\r\n          <img\r\n          className=\"profile__avatar-img\" \r\n          alt=\"Аватар\"\r\n          src={currentUser.avatar} />\r\n        </div>\r\n          <div className=\"profile__info\">                   \r\n            <div className=\"profile__edit\">\r\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                <button \r\n                className=\"profile__edit-button\"\r\n                type=\"button\"\r\n                aria-label=\"Редактировать\"\r\n                onClick={onEditProfile}\r\n                ></button>\r\n            </div>\r\n            <p className=\"profile__occupation\">{currentUser.about}</p>\r\n          </div>               \r\n          <button \r\n          className=\"profile__add-button\" \r\n          type=\"button\"\r\n          aria-label=\"Добавить\"\r\n          onClick={onAddPlace}\r\n          ></button>\r\n        </section>\r\n        <section className=\"element\">\r\n        <ul className=\"elements\">\r\n            {cards.map((card) => {\r\n              return (\r\n                <Card\r\n                card={card}\r\n                key={card._id}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n                />\r\n              );\r\n            })}\r\n        </ul>\r\n        </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","function Footer() {\r\n    return (\r\n      <footer className=\"footer\">\r\n          <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\r\n        </footer>\r\n    );\r\n  }\r\n  \r\n  export default Footer;","function ImagePopup({ card, onClose }) {\r\n    return (\r\n        <div className={`popup popup__photo-big-card ${card && \"popup_is-open\"}`}> \r\n            <div className=\"popup__photo-element\">\r\n                <img \r\n                className=\"popup__photo-big\" \r\n                src={card?.link} \r\n                alt={card?.name}\r\n                />                               \r\n                <button \r\n                className=\"popup__close popup__photo-close\"  \r\n                type=\"button\"\r\n                aria-label=\"Закрыть\"\r\n                onClick={onClose}\r\n                ></button>\r\n                <p className=\"popup__photo-edit\">{card?.name}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react'\r\n\r\nfunction PopupWithForm({ name, title, button, children, isOpen, onClose, onSubmit }) {\r\n    return(\r\n        <div className={isOpen ? `popup popup__input_${name} popup_is-open` : `popup popup__input_${name}`}>\r\n            <div className=\"popup__container\">\r\n                <h2 className=\"popup__edit\">{title}</h2>\r\n                <form className={`popup__input popup__input_${name} form`} method=\"POST\" name={`${name}`} onSubmit={onSubmit} noValidate>\r\n                    <div>{children}</div>\r\n                <input className=\"popup__submit\" type=\"submit\" value={button} />\r\n                </form>\r\n                <button className=\"popup__close\" type=\"button\" onClick={onClose}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm","import { useContext, useState, useEffect } from \"react\";\r\n\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\n\r\n\r\nfunction EditProfilePopup({ onUpdateUser, isOpen, onClose }) {\r\n    const currentUser = useContext(CurrentUserContext);\r\n    const [name, setName] = useState(\"\");\r\n    const [description, setDescription] = useState(\"\");    \r\n\r\n\r\n    useEffect(() => {        \r\n            setName(currentUser.name);\r\n            setDescription(currentUser.about);\r\n    }, [currentUser, isOpen]); \r\n\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onUpdateUser({\r\n            name,\r\n            about: description,\r\n        });\r\n    }\r\n\r\n    const handleChangeName = (event) => {\r\n        setName(event.target.value);\r\n    }\r\n\r\n    const handleChangeDescription = (event) => {\r\n        setDescription(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm \r\n        title=\"Редактировать профиль\" \r\n        name=\"edit\" \r\n        button=\"Сохранить\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}>\r\n            <section>\r\n                <input className=\"popup__about popup__about_grey-line popup__about_name\" name=\"name\" type=\"text\" value={name} onChange={handleChangeName} required placeholder=\"Имя\" id=\"sign-in-name\" minLength={2} maxLength={40} autoComplete=\"off\" />                 \r\n                <span className=\"\" id=\"sign-in-name-error\"></span>\r\n                <input className=\"popup__about popup__about_grey-line popup__about_occupation_name\" name=\"description\" type=\"text\" value={description} onChange={handleChangeDescription} required placeholder=\"О себе\" id=\"sign-in-occupation\" minLength={2} maxLength={200} autoComplete=\"off\" />\r\n                <span className=\"\" id=\"sign-in-occupation-error\"></span>                            \r\n            </section>\r\n        </PopupWithForm> \r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import { useRef } from 'react';\r\n\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\nfunction EditAvatarPopup({ onUpdateAvatar, isOpen, onClose }) {\r\n    const avatarRef = useRef();\r\n\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onUpdateAvatar(avatarRef.current.value);\r\n    } \r\n\r\n\r\n    return (\r\n        <PopupWithForm\r\n        title=\"Обновить аватар\" \r\n        name=\"avatar\" \r\n        button=\"Сохранить\" \r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}>\r\n            <section>                \r\n                <input ref={avatarRef} className=\"popup__about popup__about_grey-line popup__about_new-avatar\" id=\"sign-in-photo-card-occupation\" type=\"url\"  placeholder=\"Ссылка на картинку\"  name=\"avatar\" required autoComplete=\"off\" />\r\n                <span className=\"\" id=\"sign-in-photo-card-occupation-error\"></span>\r\n            </section>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\n\r\nexport default EditAvatarPopup;","import { useRef } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\nfunction AddPlacePopup({ onAddPlace, isOpen, onClose }) {\r\n    const placeRef = useRef();\r\n    const urlRef = useRef();\r\n\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        onAddPlace({\r\n            name: placeRef.current.value,\r\n            link: urlRef.current.value\r\n        });\r\n    } \r\n\r\n\r\n    return (\r\n        <PopupWithForm \r\n        name=\"add\" \r\n        title=\"Новое место\"\r\n        button=\"Сохранить\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}       \r\n        onSubmit={handleSubmit}>\r\n            <section>                \r\n                <input ref={placeRef} className=\"popup__about popup__about_grey-line popup__about_photo-card\" id=\"sign-in-photo-card-name\" type=\"text\" placeholder=\"Название\"  name=\"name\" required minLength={2} maxLength={30} autoComplete=\"off\" />\r\n                <span className=\"\" id=\"sign-in-photo-card-name-error\"></span>  \r\n                <input ref={urlRef} className=\"popup__about popup__about_grey-line popup__about_occupation_photo-card\" id=\"sign-in-photo-card-occupation\" type=\"url\" placeholder=\"Ссылка на картинку\"  name=\"link\" required autoComplete=\"off\" />\r\n                <span className=\"\" id=\"sign-in-photo-card-occupation-error\"></span>\r\n            </section>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\n\r\nfunction ConfirmDeletionPopup({ onDeleteCard, isOpen, onClose, card }) {\r\n\r\n    function handleSubmit(event) {\r\n    event.preventDefault();\r\n    onDeleteCard(card);\r\n    }\r\n    \r\n\r\n    return (\r\n    <PopupWithForm\r\n        title=\"Вы уверены?\" \r\n        name=\"delete\"\r\n        button=\"Да\" \r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onSubmit={handleSubmit}>\r\n    </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default ConfirmDeletionPopup;","class Api {\r\n    constructor({baseUrl, headers}) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n    }\r\n\r\n    _addCommonFetchForAllApis(url, init) {\r\n        return fetch(url, init)\r\n        .then((response) => {\r\n            if (response.ok) {\r\n                return response.json()\r\n                }\r\n            return Promise.reject(`Возникла ошибка: ${response.status}`)\r\n        })\r\n    }\r\n\r\n    \r\n    //Получить карточки с сервера\r\n    getInitialCards() {\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/cards`, {\r\n            method: \"GET\",\r\n            headers: this._headers\r\n        })\r\n    }\r\n\r\n    //Блок работы с карточками\r\n    //Добавление карточки\r\n    addNewCard(card) {\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/cards`, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: card.name,\r\n                link: card.link,\r\n                })\r\n            });\r\n    }\r\n\r\n    //Удаление карточки\r\n    deleteCard(card) {\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/cards/${card._id}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n            body: JSON.stringify()\r\n        });\r\n    }\r\n\r\n    //Лайк картинке\r\n    addLikeCard(card) {\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/cards/likes/${card._id}`, {\r\n            method: 'PUT',\r\n            headers: this._headers,\r\n            body: JSON.stringify()\r\n        });\r\n    }\r\n\r\n    //Удаление лайк картинке\r\n    deleteLikeCard(card) {\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/cards/likes/${card._id}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers,\r\n            body: JSON.stringify()\r\n        });\r\n    } \r\n\r\n    //Статус лайка\r\n    changeLikeCardStatus(card, isLiked) {\r\n        if (isLiked) {\r\n            return this.deleteLikeCard(card)\r\n        }\r\n        else {\r\n            return this.addLikeCard(card)\r\n        }\r\n    }\r\n\r\n    //Блок работы с профилем\r\n    //Получить данные пользователя\r\n    getUserInfoAbout() {\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/users/me`, {\r\n            method: \"GET\",\r\n            headers: this._headers\r\n        })\r\n    }\r\n\r\n    //Редактировать данные пользователя\r\n    changeInfo(userData) {\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                name: userData.name,\r\n                about: userData.about\r\n            })\r\n        }); \r\n    }\r\n\r\n    //Редактировать аватар пользователя\r\n    changeUserAvatar(imgSrc){\r\n        return this._addCommonFetchForAllApis(`${this._baseUrl}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n                avatar: imgSrc\r\n            })\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport  const api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-17',\r\n    headers: {\r\n        authorization: '8332b55f-19df-4a02-8ae6-2a849ecc3e1d',\r\n        'Content-Type': \"application/json\",\r\n    },\r\n});\r\n\r\n","import { useState, useEffect } from \"react\";\r\n\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport ConfirmDeletionPopup from \"./ConfirmDeletionPopup\";\r\n\r\nimport { api } from \"../utils/api\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nimport \"../index.css\";\r\n\r\nfunction App() { \r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [selectedCard, setSelectedCard] = useState(); \r\n  const [deletedCard, setDeletedCard] = useState({}); \r\n\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isConfirmDeletionPopupOpen, setIsConfirmDeletionPopupOpen] = useState(false);  \r\n\r\n\r\n\r\n  useEffect(() => {\r\n    Promise.all([api.getInitialCards(), api.getUserInfoAbout()])\r\n      .then(([result, user]) => {\r\n        setCards(result);\r\n        setCurrentUser(user);\r\n      })\r\n      .catch(error => console.log(`Ошибка при попытке загрузить данные пользователя и карточки: ${error}`));\r\n  }, []);\r\n  \r\n\r\n  const handleEditProfileClick = () => {\r\n    setIsEditProfilePopupOpen(true)\r\n  };\r\n\r\n  const handleAddPlaceClick = () => {\r\n    setIsAddPlacePopupOpen(true)\r\n  };\r\n\r\n  const handleEditAvatarClick = () => {\r\n    setIsEditAvatarPopupOpen(true)\r\n  };\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card)\r\n  };\r\n\r\n  const handleDeleteClick = (card) => {\r\n    setIsConfirmDeletionPopupOpen(true);\r\n    setDeletedCard(card);\r\n  }\r\n\r\n  const closeAllPopups = () => {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsConfirmDeletionPopupOpen(false);\r\n    setSelectedCard();\r\n  };\r\n\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    api.changeLikeCardStatus(card, isLiked).then((newCard) => {\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      setCards(newCards);\r\n    })\r\n    .catch(error => console.error(error));\r\n} \r\n\r\n\r\n  function handleDeleteCard(card) {\r\n    api.deleteCard(card).then(() => {\r\n      const newCards = cards.filter((c) => c._id !== card._id);\r\n      setCards(newCards);\r\n      closeAllPopups();\r\n    })\r\n    .catch(error => console.error(error));\r\n    }\r\n\r\n\r\n  function handleUpdateUser(userData) {\r\n    api.changeInfo(userData)\r\n    .then((result) => {\r\n      setCurrentUser(result);\r\n      closeAllPopups();\r\n    })\r\n    .catch(error => console.error(error))\r\n  }\r\n\r\n  function handleUpdateAvatar(imgSrc) {\r\n    api.changeUserAvatar(imgSrc)\r\n    .then((result) => {\r\n      setCurrentUser(result);\r\n      closeAllPopups();\r\n    })\r\n    .catch(error => console.error(error))\r\n  }\r\n\r\n  function handleAddPlaceSubmit(card) {\r\n    api.addNewCard(card)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(error => console.error(error))\r\n  }\r\n\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n    <div className=\"body\">\r\n      <div className=\"page\">\r\n        <Header />\r\n\r\n        <Main \r\n          cards={cards}\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onEditAvatar={handleEditAvatarClick}\r\n          onCardClick={handleCardClick}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleDeleteClick}\r\n        />\r\n\r\n        <Footer />\r\n\r\n        <EditProfilePopup \r\n        isOpen={isEditProfilePopupOpen} \r\n        onClose={closeAllPopups} \r\n        onUpdateUser={handleUpdateUser}\r\n        />\r\n\r\n        <AddPlacePopup\r\n        isOpen={isAddPlacePopupOpen}\r\n        onClose={closeAllPopups} \r\n        onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n\r\n        <EditAvatarPopup \r\n        isOpen={isEditAvatarPopupOpen} \r\n        onClose={closeAllPopups} \r\n        onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n\r\n        <ConfirmDeletionPopup \r\n        isOpen={isConfirmDeletionPopupOpen} \r\n        onClose={closeAllPopups} \r\n        onDeleteCard={handleDeleteCard}\r\n        card={deletedCard}\r\n        />\r\n        \r\n        <ImagePopup\r\n        card={selectedCard}\r\n        onClose={closeAllPopups} \r\n        {...selectedCard} \r\n        />\r\n\r\n      </div>\r\n    </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App  />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}